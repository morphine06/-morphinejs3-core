{"version":3,"sources":["../src/Services.js"],"names":["Services","loadServices","getAllFuncs","toCheck","props","obj","excludes","p","Object","getOwnPropertyNames","filter","prop","indexOf","concat","getPrototypeOf","map","el","console","warn","chalk","yellow","where","Config","app","mode","serviceFiles","globule","find","process","cwd","iService","serviceFile","serviceName","path","basename","substring","length","entries","forEach","index","name","constructorFn","join"],"mappings":";;;;;;;;AAAA;;AACA;;AACA;;AACA;;;;;;;;;;;;AAEA,IAAMA,QAAQ,GAAG,EAAjB;;;SAEeC,Y;;;;;oCAAf,aAA8B;AAC7B,aAASC,WAAT,CAAqBC,OAArB,EAA8B;AAC7B,UAAIC,KAAK,GAAG,EAAZ;AACA,UAAIC,GAAG,GAAGF,OAAV;AACA,UAAIG,QAAQ,GAAG,CAAC,aAAD,EAAgB,gBAAhB,EAAkC,eAAlC,EAAmD,sBAAnD,EAA2E,gBAA3E,EAA6F,UAA7F,EAAyG,SAAzG,CAAf;;AACA,SAAG;AACF,YAAIC,CAAC,GAAGC,MAAM,CAACC,mBAAP,CAA2BJ,GAA3B,CAAR;AACAE,QAAAA,CAAC,GAAGA,CAAC,CAACG,MAAF,CAAUC,IAAD,IAAU;AACtB,iBAAOA,IAAI,CAACC,OAAL,CAAa,IAAb,MAAuB,CAAvB,IAA4BN,QAAQ,CAACM,OAAT,CAAiBD,IAAjB,IAAyB,CAA5D;AACA,SAFG,CAAJ;AAGAP,QAAAA,KAAK,GAAGA,KAAK,CAACS,MAAN,CAAaN,CAAb,CAAR;AACA,OAND,QAMUF,GAAG,GAAGG,MAAM,CAACM,cAAP,CAAsBT,GAAtB,CANhB,EAJ6B,CAY7B;AACA;AACA;;;AACAD,MAAAA,KAAK,GAAGA,KAAK,CAACW,GAAN,CAAWC,EAAD,IAAQ;AACzB,eAAOA,EAAE,GAAG,IAAZ;AACA,OAFO,CAAR;AAGA,aAAOZ,KAAP;AACA;;AAEDa,IAAAA,OAAO,CAACC,IAAR,CAAaC,eAAMC,MAAN,iCAAb;AACA,QAAIC,KAAK,GAAG,MAAZ;AACA,QAAIC,eAAOC,GAAP,CAAWC,IAAX,IAAmB,YAAvB,EAAqCH,KAAK,GAAG,MAAR;;AACrC,QAAII,YAAY,GAAGC,iBAAQC,IAAR,CAAaC,OAAO,CAACC,GAAR,KAAgBR,KAAhB,GAAwB,kBAArC,CAAnB;;AAzB6B,gCA0BpBS,QA1BoB;AA2B5B,UAAMC,WAAW,GAAGN,YAAY,CAACK,QAAD,CAAhC;;AACA,UAAIE,WAAW,GAAGC,cAAKC,QAAL,CAAcH,WAAd,CAAlB;;AACAC,MAAAA,WAAW,GAAGA,WAAW,CAACG,SAAZ,CAAsB,CAAtB,EAAyBH,WAAW,CAACI,MAAZ,GAAqB,EAA9C,CAAd;AACA,UAAI/B,GAAG,mCAAgB0B,WAAhB,iDAAP;AACAvB,MAAAA,MAAM,CAAC6B,OAAP,CAAehC,GAAf,EAAoBiC,OAApB,CAA4B,OAAwBC,KAAxB,KAAkC;AAAA,YAAjC,CAACC,IAAD,EAAOC,aAAP,CAAiC;AAC7DzC,QAAAA,QAAQ,CAACgC,WAAD,CAAR,GAAwB,IAAIS,aAAJ,EAAxB;AACAxB,QAAAA,OAAO,CAACC,IAAR,aAAkBsB,IAAlB,gBAA4BtC,WAAW,CAACF,QAAQ,CAACgC,WAAD,CAAT,CAAX,CAAmCU,IAAnC,CAAwC,IAAxC,CAA5B;AACA,OAHD;AA/B4B;;AA0B7B,SAAK,IAAIZ,QAAQ,GAAG,CAApB,EAAuBA,QAAQ,GAAGL,YAAY,CAACW,MAA/C,EAAuDN,QAAQ,EAA/D,EAAmE;AAAA,mBAA1DA,QAA0D;AASlE;AACD,G","sourcesContent":["import globule from \"globule\";\nimport path from \"path\";\nimport chalk from \"chalk\";\nimport { Config } from \"./Config\";\n\nconst Services = {};\n\nasync function loadServices() {\n\tfunction getAllFuncs(toCheck) {\n\t\tvar props = [];\n\t\tvar obj = toCheck;\n\t\tlet excludes = [\"constructor\", \"hasOwnProperty\", \"isPrototypeOf\", \"propertyIsEnumerable\", \"toLocaleString\", \"toString\", \"valueOf\"];\n\t\tdo {\n\t\t\tlet p = Object.getOwnPropertyNames(obj);\n\t\t\tp = p.filter((prop) => {\n\t\t\t\treturn prop.indexOf(\"__\") !== 0 && excludes.indexOf(prop) < 0;\n\t\t\t});\n\t\t\tprops = props.concat(p);\n\t\t} while ((obj = Object.getPrototypeOf(obj)));\n\n\t\t// props =  props.sort().filter(function (e, i, arr) {\n\t\t// \tif (e != arr[i + 1] && typeof toCheck[e] == \"function\") return true;\n\t\t// });\n\t\tprops = props.map((el) => {\n\t\t\treturn el + \"()\";\n\t\t});\n\t\treturn props;\n\t}\n\n\tconsole.warn(chalk.yellow(`@Info - Services availables :`));\n\tlet where = \"/src\";\n\tif (Config.app.mode == \"production\") where = \"/lib\";\n\tlet serviceFiles = globule.find(process.cwd() + where + \"/**/*.service.js\");\n\tfor (let iService = 0; iService < serviceFiles.length; iService++) {\n\t\tconst serviceFile = serviceFiles[iService];\n\t\tlet serviceName = path.basename(serviceFile);\n\t\tserviceName = serviceName.substring(0, serviceName.length - 11);\n\t\tlet obj = await import(serviceFile);\n\t\tObject.entries(obj).forEach(([name, constructorFn], index) => {\n\t\t\tServices[serviceName] = new constructorFn();\n\t\t\tconsole.warn(`- ${name} : ${getAllFuncs(Services[serviceName]).join(\", \")}`);\n\t\t});\n\t}\n}\n\nexport { Services, loadServices };\n"],"file":"Services.js"}