{"version":3,"sources":["../src/Services.js"],"names":["Services","loadServices","getAllFuncs","toCheck","props","obj","excludes","p","Object","getOwnPropertyNames","filter","prop","indexOf","concat","getPrototypeOf","map","el","console","warn","chalk","yellow","serviceFiles","globule","find","process","cwd","iService","serviceFile","serviceName","path","basename","substring","length","entries","forEach","index","name","constructorFn","join"],"mappings":";;;;;;;;AAAA;;AACA;;AACA;;;;;;;;;;;;AAEA,IAAMA,QAAQ,GAAG,EAAjB;;;SAEeC,Y;;;;;oCAAf,aAA8B;AAC7B,aAASC,WAAT,CAAqBC,OAArB,EAA8B;AAC7B,UAAIC,KAAK,GAAG,EAAZ;AACA,UAAIC,GAAG,GAAGF,OAAV;AACA,UAAIG,QAAQ,GAAG,CAAC,aAAD,EAAgB,gBAAhB,EAAkC,eAAlC,EAAmD,sBAAnD,EAA2E,gBAA3E,EAA6F,UAA7F,EAAyG,SAAzG,CAAf;;AACA,SAAG;AACF,YAAIC,CAAC,GAAGC,MAAM,CAACC,mBAAP,CAA2BJ,GAA3B,CAAR;AACAE,QAAAA,CAAC,GAAGA,CAAC,CAACG,MAAF,CAAUC,IAAD,IAAU;AACtB,iBAAOA,IAAI,CAACC,OAAL,CAAa,IAAb,MAAuB,CAAvB,IAA4BN,QAAQ,CAACM,OAAT,CAAiBD,IAAjB,IAAyB,CAA5D;AACA,SAFG,CAAJ;AAGAP,QAAAA,KAAK,GAAGA,KAAK,CAACS,MAAN,CAAaN,CAAb,CAAR;AACA,OAND,QAMUF,GAAG,GAAGG,MAAM,CAACM,cAAP,CAAsBT,GAAtB,CANhB,EAJ6B,CAY7B;AACA;AACA;;;AACAD,MAAAA,KAAK,GAAGA,KAAK,CAACW,GAAN,CAAWC,EAAD,IAAQ;AACzB,eAAOA,EAAE,GAAG,IAAZ;AACA,OAFO,CAAR;AAGA,aAAOZ,KAAP;AACA;;AAEDa,IAAAA,OAAO,CAACC,IAAR,CAAaC,eAAMC,MAAN,iCAAb;;AACA,QAAIC,YAAY,GAAGC,iBAAQC,IAAR,CAAaC,OAAO,CAACC,GAAR,KAAgB,sBAA7B,CAAnB;;AAvB6B,gCAwBpBC,QAxBoB;AAyB5B,UAAMC,WAAW,GAAGN,YAAY,CAACK,QAAD,CAAhC;;AACA,UAAIE,WAAW,GAAGC,cAAKC,QAAL,CAAcH,WAAd,CAAlB;;AACAC,MAAAA,WAAW,GAAGA,WAAW,CAACG,SAAZ,CAAsB,CAAtB,EAAyBH,WAAW,CAACI,MAAZ,GAAqB,EAA9C,CAAd;AACA,UAAI3B,GAAG,mCAAgBsB,WAAhB,iDAAP;AACAnB,MAAAA,MAAM,CAACyB,OAAP,CAAe5B,GAAf,EAAoB6B,OAApB,CAA4B,OAAwBC,KAAxB,KAAkC;AAAA,YAAjC,CAACC,IAAD,EAAOC,aAAP,CAAiC;AAC7DrC,QAAAA,QAAQ,CAAC4B,WAAD,CAAR,GAAwB,IAAIS,aAAJ,EAAxB;AACApB,QAAAA,OAAO,CAACC,IAAR,aAAkBkB,IAAlB,gBAA4BlC,WAAW,CAACF,QAAQ,CAAC4B,WAAD,CAAT,CAAX,CAAmCU,IAAnC,CAAwC,IAAxC,CAA5B;AACA,OAHD;AA7B4B;;AAwB7B,SAAK,IAAIZ,QAAQ,GAAG,CAApB,EAAuBA,QAAQ,GAAGL,YAAY,CAACW,MAA/C,EAAuDN,QAAQ,EAA/D,EAAmE;AAAA,mBAA1DA,QAA0D;AASlE;AACD,G","sourcesContent":["import globule from \"globule\";\nimport path from \"path\";\nimport chalk from \"chalk\";\n\nconst Services = {};\n\nasync function loadServices() {\n\tfunction getAllFuncs(toCheck) {\n\t\tvar props = [];\n\t\tvar obj = toCheck;\n\t\tlet excludes = [\"constructor\", \"hasOwnProperty\", \"isPrototypeOf\", \"propertyIsEnumerable\", \"toLocaleString\", \"toString\", \"valueOf\"];\n\t\tdo {\n\t\t\tlet p = Object.getOwnPropertyNames(obj);\n\t\t\tp = p.filter((prop) => {\n\t\t\t\treturn prop.indexOf(\"__\") !== 0 && excludes.indexOf(prop) < 0;\n\t\t\t});\n\t\t\tprops = props.concat(p);\n\t\t} while ((obj = Object.getPrototypeOf(obj)));\n\n\t\t// props =  props.sort().filter(function (e, i, arr) {\n\t\t// \tif (e != arr[i + 1] && typeof toCheck[e] == \"function\") return true;\n\t\t// });\n\t\tprops = props.map((el) => {\n\t\t\treturn el + \"()\";\n\t\t});\n\t\treturn props;\n\t}\n\n\tconsole.warn(chalk.yellow(`@Info - Services availables :`));\n\tlet serviceFiles = globule.find(process.cwd() + \"/src/**/*.service.js\");\n\tfor (let iService = 0; iService < serviceFiles.length; iService++) {\n\t\tconst serviceFile = serviceFiles[iService];\n\t\tlet serviceName = path.basename(serviceFile);\n\t\tserviceName = serviceName.substring(0, serviceName.length - 11);\n\t\tlet obj = await import(serviceFile);\n\t\tObject.entries(obj).forEach(([name, constructorFn], index) => {\n\t\t\tServices[serviceName] = new constructorFn();\n\t\t\tconsole.warn(`- ${name} : ${getAllFuncs(Services[serviceName]).join(\", \")}`);\n\t\t});\n\t}\n}\n\nexport { Services, loadServices };\n"],"file":"Services.js"}